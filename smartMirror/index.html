<!DOCTYPE html>
<html>

<head>
    <meta HTTP-EQUIV="refresh" CONTENT="25">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Smart Mirror</title>
    <link rel="stylesheet" href="main.css">
    <link href="https://fonts.googleapis.com/css?family=Catamaran:100&display=swap" rel="stylesheet">
</head>

<body>
    <div class="bg"></div>
    <div id="weather">
        <div id="temp"></div>
        <div id="description"></div>
        <div id="location"></div>
    </div>

    <div id="time"></div>
    <div id="date"></div>


    <script>
        /* Time */

        var currentTime = new Date(),
            hours = currentTime.getHours(),
            minutes = currentTime.getMinutes();

        if (minutes < 10) {
            minutes = "0" + minutes;
        }


        document.getElementById('time').innerHTML = hours + ":" + minutes;


        /* DAY OF THE WEEK & DATE & YEAR */


        Date.longDays = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];

        var months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];

        function long_Days(dt) {
            return Date.longDays[dt.getDay()];
        }

        dt = new Date();
        dts = new Date();
        month = new Date();

        function long_Date(date) {
            return dts.getDate();
        }

        document.getElementById('date').innerHTML = long_Days(dt) + " " + long_Date(dts) + " " + months[month.getMonth()];


        /* WEATHER */

        const key = 'ec31c32648242d42006847fbd1edb8ea';

        function weatherBallon() {
            fetch('https://api.openweathermap.org/data/2.5/weather?id=3333196' + '&appid=' + key)
                .then(function(resp) {
                    return resp.json()
                }) // Convert data to json
                .then(function(data) {
                    drawWeather(data);
                })
                .catch(function() {
                    // catch any errors
                });
        }

        function drawWeather(d) {
            var celcius = Math.round(parseFloat(d.main.temp) - 273.15);
            var fahrenheit = Math.round(((parseFloat(d.main.temp) - 273.15) * 1.8) + 32);
            var description = d.weather[0].description;

            document.getElementById('description').innerHTML = description;
            document.getElementById('temp').innerHTML = celcius + '&deg;';
            document.getElementById('location').innerHTML = d.name;

            if (description.indexOf('rain') > 0) {
                document.body.className = 'Rainy';

            } else if (description.indexOf('cloud') > 0) {
                document.body.className = 'Cloudy';

            } else if (description.indexOf('sunny') > 0) {
                document.body.className = 'Sunny';

            } else if (description.indexOf('clear sky') > 0) {
                document.body.className = 'Clear';
            }
        }
        window.onload = function() {
            weatherBallon(6167865);
        }
    </script>

    <div id="news">
        <script type="text/javascript" language="javascript" src="https://www.rssdog.com/index.php?url=http%3A%2F%2Ffeeds.bbci.co.uk%2Fnews%2Fvideo_and_audio%2Ftechnology%2Frss.xml%23&amp;mode=javascript&amp;showonly=&amp;maxitems=5&amp;showdescs=1&amp;desctrim=0&amp;descmax=0&amp;tabwidth=100%25&amp;linktarget=_blank&amp;textsize=inherit&amp;bordercol=transparent&amp;headbgcol=%23000000&amp;headtxtcol=%23ffffff&amp;titlebgcol=%23000000&amp;titletxtcol=%23ffffff&amp;itembgcol=%23000000&amp;itemtxtcol=%23ffffff&amp;ctl=0">
        </script>
    </div>

</body></html>
